local TokyoLib = {}

TokyoLib.Themes = {
    Dark = { Background = Color3.fromRGB(30, 30, 30), Text = Color3.fromRGB(255, 255, 255) },
    Light = { Background = Color3.fromRGB(240, 240, 240), Text = Color3.fromRGB(0, 0, 0) }
}

function TokyoLib:Create(config)
    local CoreGui = game:GetService("CoreGui")
    local GUI = Instance.new("ScreenGui", CoreGui)
    GUI.Name = "TokyoUI"

    local Theme = config.Theme or TokyoLib.Themes.Dark

    local MainFrame = Instance.new("Frame")
    MainFrame.Parent = GUI
    MainFrame.Size = config.Size or UDim2.new(0, 600, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
    MainFrame.BackgroundColor3 = Theme.Background
    MainFrame.BorderSizePixel = 0

    local Title = Instance.new("TextLabel")
    Title.Parent = MainFrame
    Title.Text = config.Name or "Tokyo UI"
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.BackgroundTransparency = 1
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 18
    Title.TextColor3 = Theme.Text

    local TabHolder = Instance.new("Frame")
    TabHolder.Parent = MainFrame
    TabHolder.Size = UDim2.new(1, 0, 0, 30)
    TabHolder.Position = UDim2.new(0, 0, 0, 30)
    TabHolder.BackgroundTransparency = 1

    local ContentFrame = Instance.new("Frame")
    ContentFrame.Parent = MainFrame
    ContentFrame.Size = UDim2.new(1, 0, 1, -60)
    ContentFrame.Position = UDim2.new(0, 0, 0, 60)
    ContentFrame.BackgroundTransparency = 1

    local Tabs = {}

    function GUI:Tab(name)
        local Tab = {}
        local TabButton = Instance.new("TextButton")
        TabButton.Parent = TabHolder
        TabButton.Text = name
        TabButton.Size = UDim2.new(0, 100, 1, 0)
        TabButton.BackgroundTransparency = 1
        TabButton.Font = Enum.Font.Gotham
        TabButton.TextColor3 = Theme.Text

        local TabContent = Instance.new("Frame")
        TabContent.Parent = ContentFrame
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.Visible = false
        TabContent.BackgroundTransparency = 1

        TabButton.MouseButton1Click:Connect(function()
            for _, v in pairs(ContentFrame:GetChildren()) do
                v.Visible = false
            end
            TabContent.Visible = true
        end)

        function Tab:Button(text, callback)
            local Button = Instance.new("TextButton")
            Button.Parent = TabContent
            Button.Text = text
            Button.Size = UDim2.new(1, -20, 0, 30)
            Button.Position = UDim2.new(0, 10, 0, #TabContent:GetChildren() * 35)
            Button.BackgroundColor3 = Theme.Background
            Button.Font = Enum.Font.Gotham
            Button.TextColor3 = Theme.Text
            Button.MouseButton1Click:Connect(callback)
        end

        function Tab:Toggle(text, default, callback)
            local Toggle = Instance.new("TextButton")
            Toggle.Parent = TabContent
            Toggle.Text = text .. ": " .. (default and "ON" or "OFF")
            Toggle.Size = UDim2.new(1, -20, 0, 30)
            Toggle.Position = UDim2.new(0, 10, 0, #TabContent:GetChildren() * 35)
            Toggle.BackgroundColor3 = Theme.Background
            Toggle.Font = Enum.Font.Gotham
            Toggle.TextColor3 = Theme.Text

            local state = default
            Toggle.MouseButton1Click:Connect(function()
                state = not state
                Toggle.Text = text .. ": " .. (state and "ON" or "OFF")
                callback(state)
            end)
        end

        function Tab:Slider(text, min, max, default, callback)
            local SliderFrame = Instance.new("Frame")
            SliderFrame.Parent = TabContent
            SliderFrame.Size = UDim2.new(1, -20, 0, 30)
            SliderFrame.Position = UDim2.new(0, 10, 0, #TabContent:GetChildren() * 35)
            SliderFrame.BackgroundTransparency = 1

            local Slider = Instance.new("TextButton")
            Slider.Parent = SliderFrame
            Slider.Size = UDim2.new(1, 0, 1, 0)
            Slider.BackgroundColor3 = Theme.Background
            Slider.Text = text .. ": " .. default
            Slider.Font = Enum.Font.Gotham
            Slider.TextColor3 = Theme.Text

            Slider.MouseButton1Click:Connect(function()
                local value = math.random(min, max)
                Slider.Text = text .. ": " .. value
                callback(value)
            end)
        end

        table.insert(Tabs, Tab)
        return Tab
    end

    return GUI
end

return TokyoLib
